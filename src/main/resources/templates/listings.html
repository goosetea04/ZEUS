<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listings</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inria+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
</head>
<body>

<div th:replace="~{nav :: nav}"></div>
<div class="container">
    <h1>Listings</h1>

    <!--
    <div th:if="${error}" class="error-message">
        <p th:text="${error}" style="color: red;"></p>
    </div>


    <a href="/add-listing" class="button">Add New Listing</a>
    <a href="/cart" class="button">Cart</a>
    <a href="/manage-listings" class="button">Manage Listings</a>
    <a href="/sell-list" class="button">Sell</a>
    <a href="/topups" class="button">Top Up</a>

    Display listings -->
    <hr>
    <div class="table-container">
        <table>
            <thead>
            <tr>
                <!-- <th>ID</th> -->
                <th>NAME</th>
                <th>STOCK</th>
                <th>DESCRIPTION</th>
                <th>PRICE</th>
                <!-- <th>Add to Cart</th> -->
                <!-- <th>Update</th> -->
            </tr>
            </thead>
            <tbody>
            <!-- Iterate over visible listings -->
            <tr th:each="listing : ${listings}">
                <!-- Check if listing is visible -->
                <th:block th:if="${listing.visible}">
                    <!-- Display listing information -->
                    <!-- <td th:text="${listing.product_id}"></td> -->
                    <td>
                        <a th:href="@{/product/{id}(id=${listing.product_id})}" th:text="${listing.product_name}"></a>
                    </td>
                    <td th:text="${listing.product_quantity}"></td>
                    <td th:text="${listing.product_description}"></td>
                    <td th:text="${listing.product_price}"></td>
                    <!-- Form to add listing to cart -->
                    <!--
                    <td>
                        <form action="/add-to-cart" method="post">
                            <input type="hidden" name="listingId" th:value="${listing.product_id}" />
                            <input type="hidden" name="maxQuantity" th:value="${listing.product_quantity}" />
                            <input type="number" name="quantity" value="1" />
                            <button type="button" onclick="addToCart(this)">Add to Cart</button>
                        </form>
                    </td> -->
                    <!-- <td>
                        <form action="/update-listing" method="get">
                            <input type="hidden" name="id" th:value="${listing.product_id}" />
                            <button type="submit">Update</button>
                        </form>
                    </td> -->
                </th:block>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
